<style type="text/css">
<!--
body {
	background-image: url(Images/carbon.jpg);
	background-repeat: repeat;
}
body,td,th {
	color: #FFFFFF;
}
a:link {
	color: #FFFFFF;
}
a:visited {
	color: #CCCCCC;
}
a:hover {
	color: #66CCFF;
}
a:active {
	color: #CC6600;
}
.style1 {
	font-size: 24px;
	font-weight: bold;
	color: #CC6600;
}
.style2 {color: #CC6600}
.style4 {color: #CC6600; font-weight: bold; }
-->
</style>
<p class="style1">Adding Models to Tank Components</p>
<p>This is where things get fun.</p>
<p>Not only can you edit the hull and turret models, you can also add new models to them including their own texture maps!</p>
<p>Adding a new model requires a few steps BEFORE adding it to the Hull or Turret. <span class="style2">You can NOT add models to the gun or chassis!</span> <br />
  Please read this over before diving in!<br />
First.. Export a FBX tank to a folder somewhere. I'm using the T1 Cunningham. Read &quot;Get It Working&quot; in the help pages if you have not before continuing! </p>
<p>First.. you need a model that has textures and is UV mapped. Tank Exporter can add up to three textures to a primitive and do all the editing of the visual for you.<br />
You will however need to do some final editing of the visual because of texture paths and their types.. More on this later.<br />
  <br />
  So.. you found this cool model you want to add. These steps are the same as long as the model can be loaded in to 3DS. <br />
For this tutorial, I have included a royalty free model of a dice. Grab it <a href="DiceFBX.zip" target="_blank">HERE. </a><br />
Open the zip and export it to the same folder where you have exported a tank to from Tank Exporter.<br />
This model is in FBX but any model that 3DS can import or load will work. If you can't import it, first load it and than export it as FBX.<br />
Make a folder where the tanks FBX is located and extract/move your new models textures and model files there.<br />
It should look something like this.<br />
<img src="Images/pathdice.jpg" alt="path" width="283" height="103" /></p>
<p>Import the tank FBX.<br />
  Import the new model. 
    <br />
  Scale and translate (move) the model where you want it to sit on the turret or hull. I like to freeze the other tank parts while working on things. <br />
This is how I did it but feel free to play around.<br />
<img src="Images/dice1.jpg" alt="dice transform" width="530" height="402" /><br />
  Change the name of the model(s) in Layer Explore so that they have Hull or Turret in their names.. &quot;Hull_obj_1&quot;, &quot;Hull_obj_2&quot;.. like that. Use Turret if adding a model to the turret.<br />
  Tank Exporter uses that name to know what tank component you want this new model attached to.<br />
  If you forget to rename it, TE will warn you about unassociated models. You must name it correctly for this to work.<br />
  If the materials do not exist for the new model(s), create them and attach their textures.<br />
On the Material Editor in Max, you can use these 3 slots to bind textures.<br />
Diffuse Color, Specular Level and Bump.<br />
Here is a image of the material editor in Max and the Maps roll out. Click on the slot where it says &quot;Diffuse Color&quot;<br />
  <img src="Images/slots.jpg" alt="Slots" width="381" height="220" /><br />
  A window will open.. At the top, Double Click on Bitmap and chose one of the textures.. In this dice example we are doing, there are many texture maps in there with the diffuse maps.<br />
  Pick the new_blueBase color.<br />
  The material preview should look like this:<br /> 
  <img src="Images/matpreview.jpg" alt="Preview" width="230" height="161" /><br />
  Now go back to the Maps roll out.. To get back to it, click the little upward arrow with a checkered background (Go to Parent).<br />
  <img src="Images/goparent.jpg" alt="Back to parent" width="408" height="64" />  <br />
  Add a texture to the Bump Slot.<br />
  After you have done this correctly, the material editor should look like this.<br />
  <img src="Images/materialeditor.jpg" alt="material editor" width="376" height="636" /><br />
  <br />
  Change the perspective window in Max, upper left corner, click on standard --&gt; Materials --&gt; Shaded Materials with Maps.<br />
  This should enable seeing textures in Max.<br />
  Drag the round ball from the Material Editor on to the dice. <br />
  In this image, I un-froze the tank components. You should have something similar looking to this:<br />
  <img src="Images/coloreddice.jpg" alt="Dice with Colors" width="530" height="402" />  <br />
  Depending on if you bind only color or all three, Tank Exporter will edit the visual and change the FX shader to one of three types.<br />
  Light Only, Light with Bump, Light with Bump and Specular.<br />
  So the binding works like this:<br />
  Bind only to Diffuse Color = Light Only shader.<br />
  Bind Diffuse and Normal Map = Light and Bump shader.<br />
  Bind Diffuse, Normal Map and Specular = Light, Bump and Specular shader.<br />
  As I stated, TE will edit the visual  file and add entries for each new model and set up the shader to use based on how many textures are bound to the material.<br />
  You will need to COPY these textures to the tanks root name folder and edit the Visual to point at them. (I may add code to do this automatically at some point) <br />
  Once you have the texture(s) bound to the slot(s), and they are rendering in max, its time to rename our new models.<br />
  Add Turret to the names like this:<br />
  <img src="Images/dicerename.jpg" alt="Dice Renamed" width="239" height="85" /><br /> 
We did NO editing to any other part of the tank. We don't need to collapse the stack. No changes!<br />
We imported a dice.. cloned a copy, translated and scaled them.. set up their materials, changed their names to include &quot;Turret&quot; and now we are done!<br />
  Now Export the FBX from Max.. <span class="style2">The Dice are made of QUADS so we need to tell the Max's FBX exporter to turn quads in to triangles!</span><br />
  <img src="Images/triangulate.jpg" alt="Triangulate" width="276" height="231" /><br />
  <br />
  I export to the same place as the original T1.fbx but named as T1_Max.fbx. Don't over write the original FBX!<br />
  Next.. Import the new _Max FBX in to Tank Exporter.<br />
  During the import of the FBX, Tank Exporter will figure out that you added something to the turret. In this case, 2 new dice models.<br />
  If you set up the materials correctly, you will see them in the render window like this:<br />
  <img src="Images/tedicenow.jpg" alt="New Dice!" width="474" height="288" />  <br />
  Now the not so fun part...<br />
  You need to copy the textures for the dice you applied (the color and normal) to the tanks root folder with the other textures that are there.<br />
  You can delete all the other .DDS files. We are not doing any texture editing in this tutorial.<br />
  If you have not <a href="https://github.com/mikeoverbay/Swizzler" target="_blank">downloaded Swizzler</a>, get it NOW! You will need it for this next step.<br />
  Start Swizzler and load one of the .jpg dice images.. We are going to convert them to .DDS<br />
  Go to the top menu and select File--&gt; Open Image.<br />
  In the Load Image window, at the bottom right, change the file type to PNG.<br />
  Navigate to the res-mods folder where the  A0_T1_Cunningham is located and load one of the dice PNGs.<br /> 
  Go to File --&gt; Save. A window will pop up..<br />
  Select DDS and check Create MipMaps. There is a question mark that will bring up a help window that describes how we need to save files in DDS for the game when clicked.<br />
  Click it. 
  If you can't see the help window, close the window using the Task Bar  in Windows (right click--&gt; Close), cancel the Save window is Swizzler and Click on Top Most on menu. Click File --&gt; Save again.<br />
  When the saving window opens again.. click on the Blue Question mark icon.<br />
That window that pops up will tell you that color maps are type BC1. Close the Help window.<br />
Because we have no HD maps (though you could create them) we are going to write the DDS with MipMaps.. HD maps have no MipMaps.<br />
  So.. at this point, BC1 is checked, Save as DDS is checked and Create MipMaps is checked.. Go ahead and click Save.<br />
  A window will open and should be pointing to the same place we loaded the PNG from. You wont see any PNGs as the filter is set to DDS in the save window.<br />
  You don't need to rename the file.. Just click Save at the bottom.<br />
Do this for the normal map as well.. only, <span class="style4">check BC3 as the type before saving</span>. This is because normal maps are in BC3 DDS format in the game engine.<br />
Next we are going to edit the Visual_processed file for the Turret.<br />
If you have not <a href="https://github.com/mikeoverbay/XML_Editor" target="_blank">downloaded XML Editor</a>.. get it NOW!<br />
After you install it, it should associate .xml files to open using Xml_Editor. If not, associate it manually.<br />
You can also just start XML_Editor, click the Open File icon and navigate to the folder where the xml is located and open it.<br />
Under the tanks name, got to normal--&gt; LOD0 and open the turret visual.. If you have more than one turret visual, look for the one with the current date.<br />
Once you open it, scroll to the bottom and look for the entries for the Dice.<br />
They should look something like this:<br /> 
<img src="Images/xmldiceedit.jpg" alt="XML Editing" width="1145" height="621" /><br />
  <br />
What you what to do is change the path and replace the .png with .dds<br />
Change the path to match the other textures.. (Copy / Paste).<br />
After your edits, it should look like this:<br /> 
  <br /> 
  <img src="Images/Postxmldiceedit.jpg" alt="After XML Editing" width="1145" height="621" /><br /> 
  <br />
Save the Visual.. File ---&gt; Save ---&gt; Save ---&gt; Yes <br />
At this point.. the only thing left is to load the game and see if your work, works :)<br />
And it does!<br />
<img src="Images/diceingame.jpg" alt="Dice in Game" width="505" height="359" /><br />
  You need to reload World of Tanks after adding anything to res_mods. The game only scans that folder at start up!<br />
  <br />
  Hope this all worked out. If not, try again.. Its rather east once you get used to it. <br />
</p>
<p>  <br />
</p>
